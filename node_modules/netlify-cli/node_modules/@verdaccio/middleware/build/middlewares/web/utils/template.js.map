{"version":3,"file":"template.js","names":["debug","buildDebug","renderTemplate","template","manifest","options","base","title","JSON","stringify","metaScripts","join","scriptsbodyBefore","getManifestValue","js","map","item","scriptsBodyAfter"],"sources":["../../../../src/middlewares/web/utils/template.ts"],"sourcesContent":["import buildDebug from 'debug';\n\nimport { TemplateUIOptions } from '@verdaccio/types';\n\nimport { Manifest, getManifestValue } from './manifest';\n\nconst debug = buildDebug('verdaccio:web:render:template');\n\nexport type Template = {\n  manifest: Manifest;\n  options: TemplateUIOptions;\n  metaScripts?: string[];\n  scriptsBodyAfter?: string[];\n  scriptsbodyBefore?: string[];\n};\n\n// the outcome of the Webpack Manifest Plugin\nexport interface WebpackManifest {\n  [key: string]: string;\n}\n\nexport default function renderTemplate(template: Template, manifest: WebpackManifest) {\n  debug('template %o', template);\n  debug('manifest %o', manifest);\n\n  return `\n    <!DOCTYPE html>\n      <html lang=\"en-us\"> \n      <head>\n        <meta charset=\"utf-8\">\n        <base href=\"${template?.options.base}\">\n        <title>${template?.options?.title ?? ''}</title>        \n        <link rel=\"icon\" href=\"${template?.options.base}-/static/favicon.ico\"/>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /> \n        <script>\n            window.__VERDACCIO_BASENAME_UI_OPTIONS=${JSON.stringify(template.options)}\n        </script>\n        ${template?.metaScripts ? template.metaScripts.join('') : ''}\n      </head>    \n      <body class=\"body\">\n      ${template?.scriptsbodyBefore ? template.scriptsbodyBefore.join('') : ''}\n        <div id=\"root\"></div>\n        ${getManifestValue(template.manifest.js, manifest, template?.options.base)\n          .map((item) => `<script defer=\"defer\" src=\"${item}\"></script>`)\n          .join('')}\n        ${template?.scriptsBodyAfter ? template.scriptsBodyAfter.join('') : ''}\n      </body>\n    </html>\n  `;\n}\n"],"mappings":";;;;;;AAAA;AAIA;AAAwD;AAExD,MAAMA,KAAK,GAAG,IAAAC,cAAU,EAAC,+BAA+B,CAAC;AAe1C,SAASC,cAAc,CAACC,QAAkB,EAAEC,QAAyB,EAAE;EAAA;EACpFJ,KAAK,CAAC,aAAa,EAAEG,QAAQ,CAAC;EAC9BH,KAAK,CAAC,aAAa,EAAEI,QAAQ,CAAC;EAE9B,OAAQ;AACV;AACA;AACA;AACA;AACA,sBAAsBD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,OAAO,CAACC,IAAK;AAC7C,iBAAe,yBAAEH,QAAQ,aAARA,QAAQ,4CAARA,QAAQ,CAAEE,OAAO,sDAAjB,kBAAmBE,KAAK,yEAAI,EAAG;AAChD,iCAAiCJ,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,OAAO,CAACC,IAAK;AACxD;AACA;AACA,qDAAqDE,IAAI,CAACC,SAAS,CAACN,QAAQ,CAACE,OAAO,CAAE;AACtF;AACA,UAAUF,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEO,WAAW,GAAGP,QAAQ,CAACO,WAAW,CAACC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAG;AACrE;AACA;AACA,QAAQR,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAES,iBAAiB,GAAGT,QAAQ,CAACS,iBAAiB,CAACD,IAAI,CAAC,EAAE,CAAC,GAAG,EAAG;AAC/E;AACA,UAAU,IAAAE,0BAAgB,EAACV,QAAQ,CAACC,QAAQ,CAACU,EAAE,EAAEV,QAAQ,EAAED,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,OAAO,CAACC,IAAI,CAAC,CACvES,GAAG,CAAEC,IAAI,IAAM,8BAA6BA,IAAK,aAAY,CAAC,CAC9DL,IAAI,CAAC,EAAE,CAAE;AACpB,UAAUR,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEc,gBAAgB,GAAGd,QAAQ,CAACc,gBAAgB,CAACN,IAAI,CAAC,EAAE,CAAC,GAAG,EAAG;AAC/E;AACA;AACA,GAAG;AACH"}